## Разработайте программу Bookypedia — консольную программу, которая хранит книги в БД Postgres.

При запуске программа должна считать URL базы данных из переменной окружения `BOOKYPEDIA_DB_URL`.
При разработке использован паттерн "Репозиторий".

### Формат базы данных

В базе данных содержатся таблицы: authors и books.
* Таблица authors хранит информацию об авторах. Поля таблицы:
    - **id** — уникальный идентификатор автора. Имеет тип **uuid**. Например: `4b3170d8-7aeb-4df2-b065-128898fb7810`. Поле **id** — выступает в роли первичного ключа таблицы.
    - **name** — имя автора книги, строка длиной до 100 символов. Дублирующиеся значения в этом столбце не допускаются. Имена, записанные в разном регистре, считаются разными: `Antoine De Saint-Exupery и Antoine de Saint-Exupery`.
* Таблица books хранит информацию о книгах:
    - **id** — уникальный идентификатор книги типа **uuid**. Выступает в роли первичного ключа таблицы.
    - **author_id** — идентификатор автора книги типа **uuid**. Значения `NULL` не допускаются.
    - **title** — название книги, строка длиной до 100 символов. Допускается дублирование значений в этом поле. Значения `NULL` не допускаются. При поиске книги названия, записанные в разном регистре, считаются разными.
    - **publication_year** — год публикации, целое число.


Если при старте программы какой-либо из таблиц **author** или **books** не существует, программа должна создать их. Если указанные таблицы существуют, предполагается, что они содержат правильную структуру.

### Формат входных и выходных данных программы

На стандартный вход программы подаются команды — по одной в каждой строке. Команды имеют формат:

> Команда <аргументы команды>

Работа программы завершается после того как в `stdin` данные закончатся.

#### Команда AddAuthor
Команда **AddAuthor <name>** добавляет в БД автора книги с указанным именем, а **id** автора генерируется случайным образом. Имя состоит из одного или нескольких слов, разделённых пробелами. Пробелы в начале и конце имени удаляются. Примеры:
```
AddAuthor Joanne Rowling
AddAuthor Antoine de Saint-Exupery
```

Если автор был добавлен успешно, команда ничего выводить в stdout не должна. Есть при добавлении произошла ошибка, программа должна вывести в `stdout` строку `Failed to add author`. В следующем примере выводится ошибка, когда пользователь вводит имя автора повторно, а также когда имя автора пустое:
```
AddAuthor Joanne Rowling
AddAuthor Joanne Rowling
Failed to add author
AddAuthor
Failed to add author
```

#### Команда ShowAuthors

Команда **ShowAuthors** не имеет аргументов. Она выводит нумерованный список авторов, отсортированный по алфавиту. Пример:
```
AddAuthor Joanne Rowling
AddAuthor Jack London
ShowAuthors
1. Jack London
2. Joanne Rowling
```

Если список авторов пуст, команда **ShowAuthors** ничего не выводит.

#### Команда AddBook

Команда **AddBook <pub_year> <title>** добавляет в БД книгу с указанным названием и годом публикации. При выполнении команды программа должна вывести строку `Select author:`, за которой следует нумерованный список авторов, отсортированных по алфавиту. В конце программа должна вывести строку `Enter author # or empty line to cancel` и прочитать из `stdin` порядковый номер автора.


Если введена пустая строка, добавление книги отменяется. Если введён допустимый номер автора, в таблицу книг должна быть добавлена книга. Поле **author_id** добавленной книги должно быть равно **id** автора книги.
```
AddBook 1998 Harry Potter and the Chamber of Secrets
Select author:
1 Jack London
2 Joanne Rowling
Enter author # or empty line to cancel
2
AddBook 1851 Moby-Dick
Select author:
1 Jack Londong
2 Joanne Rowling
Enter author # or empty line to cancel

AddAuthor Herman Melville
AddBook 1851 Moby-Dick
Select author:
1 Jack Londong
2 Joanne Rowling
3 Herman Melville
Enter author # or empty line to cancel
3
```

#### Команда ShowAuthorBooks

Команда **ShowAuthorBooks** не имеет параметров. В ответ на эту команду в `stdout` выводится нумерованный список имён авторов, отсортированный по алфавиту, и просьба ввести номер автора, как в команде **AddAuthor**. После выбора автора в `stdout` должен быть выведен нумерованный список книг с годами их выпуска, отсортированный по году публикации. Если одна или несколько книг были выпущены в одном и том же году, они выводятся в порядке возрастания их названия. Пример:
```
ShowAuthorBooks
Select author:
1 Boris Akunin
2 Jack London
3 Joanne Rowling
4 Herman Melville
Enter author # or empty line to cancel
1
1 Azazelle, 1998
2 Murder on the Leviathan, 1998
3 The Turkish Gambit, 1998
4 She Lover of Death, 2001
```

Если у введённого автора нет книг, либо введена пустая строка вместо порядкового номера автора, команда ничего не выводит.

#### Команда ShowBooks

Команда **ShowBooks** не имеет параметров. Она выводит в `stdout` нумерованный список книг, отсортированный по названию. Информация об книге содержит название и год публикации. Пример:
```
ShowBooks
1 Fight Club, 1996
2 Harry Potter and the Chamber of Secrets, 1998
3 Romeo and Juliet, 1597
```

Если книг в базе нет, в `stdout` ничего выводиться не должно.

#### Прочие команды

Чтобы программой было удобно пользоваться, рекомендуем добавить команду **Help**, выводящую список доступных команд — как было в программе, которая моделирует телевизор. Тесты будут использовать только команды, перечисленные выше.